name: Send Webhook

on:
  push:
    paths:
      - 'test-files/**'

jobs:
  send_webhook:
    runs-on: ubuntu-latest
    needs: push
    steps:
      - name: Send repository_dispatch event
        run: |
          curl -XPOST -H "Authorization: bearer ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github.everest-preview+json" \
            -H "Content-Type: application/json" \
            --data '{"event_type": "subdir_changed", "client_payload": {"test-files_changed": "test-files"}}' \
            https://api.github.com/repos/AliceOrunitia/fileTests/dispatches
        env:
          PAT: ${{ secrets.GITHUB_TOKEN }}
